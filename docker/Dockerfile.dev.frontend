# Development Dockerfile for Next.js frontend with live reload
FROM node:18-alpine

ARG NEXT_PUBLIC_API_URL
ENV NEXT_PUBLIC_API_URL=${NEXT_PUBLIC_API_URL}

RUN apk add --no-cache libc6-compat python3 make g++ build-base

WORKDIR /app

COPY frontend/package*.json ./

RUN npm ci

COPY frontend/ .

EXPOSE 3000

CMD ["npm", "run", "dev", "--", "-H", "0.0.0.0"]